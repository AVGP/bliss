!function(){"use strict";var t=!(!self.Bliss||!Bliss.shy),e=self.Bliss=function(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null};e.shy=t,e.extend=function(t,n,r){for(var i in n){if(r){var s=e.type(r);if("own"===r&&!n.hasOwnProperty(i)||"array"===s&&-1===r.indexOf(i)||"regexp"===s&&!r.test(i)||"function"===s&&!r.call(n,i))continue}var o=Object.getOwnPropertyDescriptor(n,i);!o||o.writable&&o.configurable&&o.enumerable&&!o.get&&!o.set?t[i]=n[i]:(delete t[i],Object.defineProperty(t,i,o))}return t},e.extend(e,{sources:{},$:function(t,e){return t instanceof Node||t instanceof Window?[t]:[].slice.call("string"==typeof t?(e||document).querySelectorAll(t):t||[])},type:function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=(Object.prototype.toString.call(t).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase();return"number"==e&&isNaN(t)?"nan":e},firstDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},create:function(t){var n=t.document||document;if("string"===e.type(t)){if(1===arguments.length)return n.createTextNode(t);t=arguments[1],t.tag=arguments[0]}var r=n.createElement(t.tag);return delete t.tag,e.set(r,t)},lazy:function(t,n,r){if(arguments.length>=3)Object.defineProperty(t,n,{get:function(){delete this[n];try{this[n]=5}catch(t){console.error(t)}return this[n]=r.call(this)},configurable:!0,enumerable:!0});else if(2===arguments.length)for(var i in n)e.lazy(t,i,n[i])},stored:function(t,n,r){if(arguments.length>=3)Object.defineProperty(t,n,{get:function(){var t=this["_"+n],e=r.get&&r.get.call(this,t);return void 0!==e?e:t},set:function(t){var e=this["_"+n],i=r.set&&r.set.call(this,t,e);this["_"+n]=void 0!==i?i:t},configurable:r.configurable,enumerable:r.enumerable});else if(2===arguments.length)for(var i in n)e.stored(t,i,n[i])},Class:function(t){var n=t.constructor||function(){};delete t.constructor;var r=t["abstract"];delete t["abstract"];var i=function(){if(r&&this.constructor===i)throw new Error("Abstract classes cannot be directly instantiated.");return this.constructor["super"]&&this.constructor["super"]!=i&&this.constructor["super"].apply(this,arguments),n.apply(this,arguments)};return i["super"]=t["extends"]||null,delete t["extends"],i.prototype=e.extend(Object.create(i["super"]&&i["super"].prototype),{constructor:i}),e.extend(i,t["static"]),delete t["static"],e.lazy(i.prototype,t.lazy),delete t.lazy,e.stored(i.prototype,t.stored),delete t.stored,e.extend(i.prototype,t),i.prototype["super"]=i["super"]?i["super"].prototype:null,i},include:function(){var t=arguments[arguments.length-1],n=2===arguments.length?arguments[0]:!1,r=document.createElement("script");return n?Promise.resolve():new Promise(function(n,i){e.set(r,{async:!0,onload:function(){n(),e.remove(r)},onerror:function(){i()},src:t,inside:document.head})})},fetch:function(t,e){if(!t)throw new TypeError("URL parameter is mandatory and cannot be "+t);t=new URL(t,location),e=e||{},e.data=e.data||"",e.method=e.method||"GET",e.headers=e.headers||{};var n=new XMLHttpRequest;"GET"===e.method&&e.data&&(t.search+=e.data),document.body.setAttribute("data-loading",t),n.open(e.method,t,!e.sync);for(var r in e)if(r in n)try{n[r]=e[r]}catch(i){self.console&&console.error(i)}"GET"===e.method||e.headers["Content-type"]||e.headers["Content-Type"]||n.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var s in e.headers)n.setRequestHeader(s,e.headers[s]);return new Promise(function(t,r){n.onload=function(){document.body.removeAttribute("data-loading"),0===n.status||n.status>=200&&n.status<300||304===n.status?t(n):r(Error(n.statusText))},n.onerror=function(){r(Error("Network Error"))},n.send("GET"===e.method?null:e.data)})}}),e.Element=function(t){this.element=t,this.data={},this.bliss={}},e.Element.prototype={set:function(t){for(var n in t)n in e.setSpecial?e.setSpecial[n].call(this,t[n]):n in this?this[n]=t[n]:this.setAttribute(n,t[n]);return this},transition:function(t,n){return n=+n||400,new Promise(function(r,i){if("transition"in this.style){var s=this,o=e.extend({},this.style,/^transition(Duration|Property)$/);e.style(this,{transitionDuration:(n||400)+"ms",transitionProperty:Object.keys(t).join(", ")}),this.addEventListener("transitionend",function u(){clearTimeout(a),e.style(s,o),s.removeEventListener(u),r(s)});var a=setTimeout(r,n+50);e.style(this,t)}else r(this)}.bind(this))},remove:function(){this.parentNode&&this.parentNode.removeChild(this)},fire:function(t,n){var r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),this.dispatchEvent(e.extend(r,n))},waitFor:function(t){if(this._&&this._.bliss.fired&&this._.bliss.fired[t]>0)return Promise.resolve();var e=this;return new Promise(function(n,r){e.addEventListener(t,function i(r){n(r),e.removeEventListener(t,i)})})}},e.setSpecial={style:function(t){e.extend(this.style,t)},attributes:function(t){for(var e in t)this.setAttribute(e,t[e])},properties:function(t){e.extend(this,t)},events:function(t){if(t instanceof EventTarget){var e=this;if(t._&&t._.bliss){var n=t._.bliss.listeners;for(var r in n)n[r].forEach(function(t){e.addEventListener(r,t.callback,t.capture)})}for(var i in t)0===i.indexOf("on")&&(this[i]=t[i])}else for(var s in t)s.split(/\s+/).forEach(function(e){this.addEventListener(e,t[s])},this)},delegate:function(t){3===arguments.length?(t={},t[arguments[0]]={},t[arguments[0]][arguments[1]]=arguments[2]):2===arguments.length&&(t={},t[arguments[0]]=arguments[1]);var e=this;for(var n in t)!function(t,n){e.addEventListener(t,function(t){for(var e in n)t.target.matches(e)&&n[e].call(this,t)})}(n,t[n])},contents:function(t){(t||0===t)&&(Array.isArray(t)?t:[t]).forEach(function(t){["string","number","object"].indexOf(e.type(t))>-1&&(t=e.create(t)),t instanceof Node&&(/^template$/i.test(this.nodeName)?this.content||this:this).appendChild(t)},this)},inside:function(t){t.appendChild(this)},before:function(t){t.parentNode.insertBefore(this,t)},after:function(t){t.parentNode.insertBefore(this,t.nextSibling)},start:function(t){t.insertBefore(this,t.firstChild)},around:function(t){t.parentNode&&e.before(this,t),(/^template$/i.test(this.nodeName)?this.content||this:this).appendChild(t)}},e.Array=function(t){this.array=t},e.add=function(t,n){n=e.extend({$:!0,element:!0,array:!0},n),"string"===e.type(arguments[0])&&(t={},t[arguments[0]]=arguments[1]);for(var r in t){try{var i=t[r]}catch(s){continue}!function(t,r){"function"==e.type(r)&&(n.$&&(e.sources[t]=r,e[t]=function(){var t=[].slice.apply(arguments),n=t.shift();return n&&e.firstDefined(r.apply(n,t),n)}),n.element&&(e.Element.prototype[t]=function(){return e.firstDefined(r.apply(this.element,arguments),this.element)}),n.array&&(e.Array.prototype[t]=function(){var t=arguments;return this.array.map(function(n){return e.firstDefined(r.apply(n,t),n)})}))}(r,i)}},e.add(e.Element.prototype),e.add(e.setSpecial),e.add(HTMLElement.prototype,{$:!1})}(),function(t){"use strict";if(Bliss&&!Bliss.shy){if(t.extend(t.Element.prototype,{clone:function(){var e=this.cloneNode(!0),n=t.$("*",e).concat(e);return t.$("*",this).concat(this).forEach(function(e,r,i){t.events(n[r],e)}),e}}),Object.defineProperty(Node.prototype,"_",{get:function(){return Object.defineProperty(this,"_",{value:new t.Element(this)}),this._},configurable:!0}),Object.defineProperty(Array.prototype,"_",{get:function(){return Object.defineProperty(this,"_",{value:new t.Array(this)}),this._},configurable:!0}),self.EventTarget&&"addEventListener"in EventTarget.prototype){var e=EventTarget.prototype.addEventListener,n=EventTarget.prototype.removeEventListener,r=function(t,e,n){return!(n.callback===t&&n.capture==e)};EventTarget.prototype.addEventListener=function(t,n,i){if(this._){var s=this._.bliss.listeners=this._.bliss.listeners||{};s[t]=s[t]||[];var o=this._.bliss.fired=this._.bliss.fired||{};o[t]=o[t]||0;var a=n;n=function(){return this._.bliss.fired[t]++,a.apply(this,arguments)},a.callback=n,0===s[t].filter(r.bind(null,n,i)).length&&s[t].push({callback:a,capture:i})}return e.call(this,t,n,i)},EventTarget.prototype.removeEventListener=function(t,e,i){if(this._){var s=this._.bliss.listeners=this._.bliss.listeners||{},o=e;e=o.callback,s[t]=s[t]||[],s[t]=s[t].filter(r.bind(null,e,i))}return n.call(this,t,e,i)}}self.$=self.$||t,self.$$=self.$$||t.$}}(Bliss);